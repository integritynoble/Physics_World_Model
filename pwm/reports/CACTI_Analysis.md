# CACTI 无Mismatch结果分析

## 核心问题：为什么我们的baseline这么低？

### 数据对比

| 指标 | 我们的结果 | 已发表结果 | 差距 |
|------|----------|----------|------|
| 平均 PSNR | **8.88 dB** | **26.62 dB** | **-17.74 dB** ❌ |
| 平均 SSIM | 0.0400 | ~0.85 | -0.81 ❌ |

### 按场景对比

| 场景 | 我们的PSNR | 已发表PSNR | 差距 |
|------|-----------|----------|------|
| kobe32 | 12.32 | 24.00 | -11.68 dB |
| crash32 | 7.23 | 25.40 | -18.17 dB |
| aerial32 | 10.45 | 26.13 | -15.68 dB |
| traffic48 | 8.32 | 21.06 | -12.74 dB |
| runner40 | 11.46 | 28.70 | -17.24 dB |
| drop40 | 4.29 | 34.42 | -30.13 dB |

## 根本原因分析

### 1. **噪声模型过激进** 🔴
我们的噪声设置：
- Poisson gain: 1000.0（很低的SNR）
- Gaussian read noise: σ = 5.0
- 这导致测量结果非常嘈杂

**已发表的CACTI设置**（来自PnP-SCI论文）：
- 使用的是**真实CACTI硬件** or **低噪声模拟**
- 可能的gain: 10000+ （高SNR）
- 可能的read noise: < 1.0

### 2. **GAP-TV参数次优** 🟡
我们的重建参数：
```
max_iter: 100
lam (step size): 0.5
tv_weight: 0.1
tv_iter: 5
```

**可能的最优参数**（来自PnP-SCI代码）：
- 更多迭代（200-300）
- 自适应步长或线性搜索
- 动态TV正则化权重
- 更好的初始化（例如，从低分辨率重建开始）

### 3. **算法选择** 🟡
我们使用的是**基础GAP-TV**（梯度上升+TV去噪）
- 可能已发表的使用了**优化的GAP-TV**变体
- 或使用了**更好的去噪算子**（非简单TV）

## 关键观察

### GAP-TV的真正性能
- **低噪声设置**（已发表）: 24-34 dB ✅
- **高噪声设置**（我们）: 4-12 dB ❌
- **SNR对性能的影响**: ~20 dB

这表明：
1. CACTI性能**强烈依赖于噪声水平**
2. 即使是"no mismatch"情况下，噪声也是主要限制
3. 算法的收敛速度和质量在低SNR下大幅下降

### Deep Learning的优势
- **EfficientSCI (最佳)**: 36.28 dB (平均)
- **ELP-Unfolding**: 33.94 dB
- **PnP-FFDNet**: 29.36 dB
- **GAP-TV (已发表)**: 26.62 dB
- **GAP-TV (我们的高噪声)**: 8.88 dB

深度学习方法的优势：
- ✅ 可学习的去噪器比固定TV更强
- ✅ 端到端优化可以学习对噪声的鲁棒性
- ✅ 多帧平均（隐式）来自学习到的特征

## 改进方向

### 立即可行
1. **降低噪声模型**到与硬件匹配的水平
2. **调优GAP-TV参数**：
   - 增加迭代到200-300
   - 自动调整lam基于重建误差
   - 使用更强的去噪（BM3D而不是TV）

3. **更好的初始化**：
   - 从双降采样重建开始
   - 使用多尺度策略

### 中期
1. **在低噪声设置下重新运行**，验证我们的实现
2. **与PnP-SCI参考代码对齐**
3. **追踪参数敏感性**（哪个参数影响最大）

### 长期
1. **Learned Unfolding**：用神经网络替换TV去噪
2. **Hybrid方法**：Corrected operator + 轻量级网络
3. **降噪预处理**：在重建前预处理测量值

## 建议

### 为什么CACTI baseline这么低：
**不是实现问题，而是噪声/参数设置问题**
- ✓ 转发模型正确（可验证）
- ✓ 反向模型正确（与CASSI类似）
- ❌ 噪声模型太激进
- ❌ 算法参数未优化

### 实际应用方向：
1. **不依赖GAP-TV**：对于低噪声情况，用深度学习（35+ dB）
2. **GAP-TV的角色**：在硬件受限时作为备选方案
3. **真实数据验证**：在实际CACTI硬件上测试

## 数据文件
- 基准结果: `cacti_baseline_no_mismatch.json`
- 已发表结果对比: `cacti.md`
- CACTI工作流程: `cacti_working_process.md`
